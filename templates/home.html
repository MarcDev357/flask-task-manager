<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Task Manager</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
	  <div class="container-fluid">
		<a class="navbar-brand" href="#">Task Manager</a>
	  </div>
	</nav>
  
	<!-- Main Content -->
	<div class="container py-5 d-flex justify-content-center">
		<div class="card shadow rounded w-100" style="max-width: 800px;">
		  <div class="card-body px-4 py-4">	  
		  <h1 class="text-center mb-4">Task Manager!</h1>
  
		  <!-- Flash Messages -->
		  {% with messages = get_flashed_messages() %}
			{% if messages %}
			  {% for message in messages %}
				<div class="alert alert-success alert-dismissible fade show" role="alert">
				  {{ message }}
				  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			  {% endfor %}
			{% endif %}
		  {% endwith %}
  
		  <!-- Add Task Form -->
		  <form action="/add" method="POST" class="row g-2 mb-4">
			<div class="col-md-6">
			  <input type="text" name="content" class="form-control" placeholder="Enter a new task" required>
			</div>
			<div class="col-md-3">
			  <input type="date" name="due_date" class="form-control" placeholder="Due date">
			</div>
			<div class="col-md-2">
			  <select name="priority" class="form-select">
				<option value="1">Low</option>
				<option value="2">Medium</option>
				<option value="3">High</option>
			  </select>
			</div>
			<div class="col-md-1">
			  <button type="submit" class="btn btn-primary w-100">Add</button>
			</div>
		  </form>

		  <!-- Task List -->
		  <h4 class="mb-3">Tasks:</h4>
		  <ul class="list-group">

			<!-- ðŸ”´ Overdue Tasks -->
			<li class="list-group-item active">Overdue</li>
			{% for task in tasks if not task.completed and task.due_date and task.due_date < current_date %}
				{% include 'task_item.html' %}
			{% endfor %}

		  
			<!-- ðŸŸ¡ Upcoming Tasks -->
			<li class="list-group-item active mt-3">Upcoming</li>
			{% for task in tasks if not task.completed and (not task.due_date or task.due_date >= current_date) %}
				{% include 'task_item.html' %}
			{% endfor %}

		  
			<!-- âœ… Completed Tasks -->
			<li class="list-group-item active mt-3">Completed</li>
			{% for task in tasks if task.completed %}
			  {% include 'task_item.html' %}
			{% endfor %}
		  
		  </ul>
		  
		</div>
	  </div>
	</div>
  
	<!-- Auto-dismiss Flash Message -->
	<script>
	  setTimeout(function() {
		let alert = document.querySelector('.alert');
		if (alert) {
		  alert.classList.remove('show');
		  alert.classList.add('fade');
		}
	  }, 3000);
	</script>
  
	<!-- Bootstrap JS (keep this at the bottom) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
  
